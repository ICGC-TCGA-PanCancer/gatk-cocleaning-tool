class: CommandLineTool
cwlVersion: v1.0
label: GATK BaseRecalibrator

hints:
  - class: ResourceRequirement
    coresMin: 8

requirements: 
  - class: DockerRequirement
    dockerPull: "opengenomics/gatk-cocleaning:v1.0"

baseCommand: 
  - "java"
  - "-jar"
  - "/opt/GenomeAnalysisTK.jar"

arguments:
  - 
    valueFrom: "BaseRecalibrator"
    prefix: -T
    position: 1
  - 
    valueFrom: "8"
    prefix: -nct
    position: 2
  - 
    valueFrom: "recal_data.table"
    prefix: -o
    position: 3

inputs: 
  input_bam:
    type: File
    inputBinding: 
      prefix: -I
      position: 5

  input_bam_bai:
    type: File

  reference:
    type: File
    inputBinding: 
      prefix: -R
      position: 4

  reference_fai:
    type: File

  reference_dict:
    type: File

  knownSites:
    type: ["null", File]
    inputBinding: 
      prefix: -knownSites
      position: 6

outputs: 
  output_report:
    type: File
    outputBinding: 
      glob: "recal_data.table"
